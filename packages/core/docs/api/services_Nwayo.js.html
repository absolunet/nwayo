<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>services/Nwayo.js - @nwayo/core API documentation</title>

	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta http-equiv="cleartype" content="on">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="shortcut icon"    href="../assets__/icons/favicon.ico">
	<link rel="apple-touch-icon" href="../assets__/icons/touch-57.png">
	<link rel="apple-touch-icon" href="../assets__/icons/touch-72.png"  sizes="72x72">
	<link rel="apple-touch-icon" href="../assets__/icons/touch-76.png"  sizes="76x76">
	<link rel="apple-touch-icon" href="../assets__/icons/touch-114.png" sizes="114x114">
	<link rel="apple-touch-icon" href="../assets__/icons/touch-120.png" sizes="120x120">
	<link rel="apple-touch-icon" href="../assets__/icons/touch-144.png" sizes="144x144">
	<link rel="apple-touch-icon" href="../assets__/icons/touch-152.png" sizes="152x152">
	<link rel="apple-touch-icon" href="../assets__/icons/touch-167.png" sizes="167x167">
	<link rel="apple-touch-icon" href="../assets__/icons/touch-180.png" sizes="180x180">
	<link rel="image_src"        href="../assets__/icons/touch-512.png">
	<link rel="icon"             href="../assets__/icons/icon-64.png"  sizes="64x64">
	<link rel="icon"             href="../assets__/icons/icon-96.png"  sizes="96x96">
	<link rel="icon"             href="../assets__/icons/icon-192.png" sizes="192x192">
	<link rel="icon"             href="../assets__/icons/icon-195.png" sizes="195x195">
	<link rel="icon"             href="../assets__/icons/icon-196.png" sizes="196x196">
	<link rel="icon"             href="../assets__/icons/icon-228.png" sizes="228x228">

	<meta name="application-name"                content="@nwayo/core">
	<meta name="msapplication-TileColor"         content="#2b2d3c">
	<meta name="msapplication-square70x70logo"   content="../assets__/icons/tile-small.png">
	<meta name="msapplication-square150x150logo" content="../assets__/icons/tile-medium.png">
	<meta name="msapplication-wide310x150logo"   content="../assets__/icons/tile-wide.png">
	<meta name="msapplication-square310x310logo" content="../assets__/icons/tile-large.png">

	<link href="../assets__/main.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,500,700|Lato:100,100i,300,300i,400,400i,700,700i,900,900i|Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap" rel="stylesheet">

	
	<!-- @absolunet/manager@2.0.1 (c) 2011-2020 Absolunet -->
</head>
<body>
	

	<header>
		<p class="package"><a href="../">@nwayo/core</a><span class="version">1.0.0-dev.1.0</span></p>
		<a href="https://github.com/absolunet/nwayo" class="github" data-external="external">View on GitHub</a>
	</header>

	<div class="container">
		<nav><div>
			<h2><a href="index.html">API Home</a></h2><h3>Classes</h3><ul><li><a href="nwayo.core.CoreServiceProvider.html">CoreServiceProvider</a><ul class='members'></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.CoreServiceProvider.html#register">register</a></li><li data-type='method'><a href="nwayo.core.CoreServiceProvider.html#boot">boot</a></li><li data-type='method'><a href="nwayo.core.CoreServiceProvider.html#bindNwayo">bindNwayo</a></li><li data-type='method'><a href="nwayo.core.CoreServiceProvider.html#bindBuilder">bindBuilder</a></li><li data-type='method'><a href="nwayo.core.CoreServiceProvider.html#bindProjectService">bindProjectService</a></li><li data-type='method'><a href="nwayo.core.CoreServiceProvider.html#bindBuildType">bindBuildType</a></li><li data-type='method'><a href="nwayo.core.CoreServiceProvider.html#addDefaultBuildTypes">addDefaultBuildTypes</a></li><li data-type='method'><a href="nwayo.core.CoreServiceProvider.html#addBuildPolicies">addBuildPolicies</a></li></ul></li><li><a href="nwayo.core.console.commands.build.AbstractBuildCommand.html">AbstractBuildCommand</a><ul class='members'><li data-type='member'><a href="nwayo.core.console.commands.build.AbstractBuildCommand.html#.dependencies">dependencies</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.AbstractBuildCommand.html#policies">policies</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.AbstractBuildCommand.html#type">type</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.AbstractBuildCommand.html#name">name</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.AbstractBuildCommand.html#description">description</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.AbstractBuildCommand.html#options">options</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.AbstractBuildCommand.html#stringHelper">stringHelper</a></li></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.console.commands.build.AbstractBuildCommand.html#handle">handle</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.AbstractBuildCommand.html#build">build</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.AbstractBuildCommand.html#getBuildTypes">getBuildTypes</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.AbstractBuildCommand.html#getBundles">getBundles</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.AbstractBuildCommand.html#getBuildArguments">getBuildArguments</a></li></ul></li><li><a href="nwayo.core.console.commands.build.BuildAllCommand.html">BuildAllCommand</a><ul class='members'><li data-type='member'><a href="nwayo.core.console.commands.build.BuildAllCommand.html#policies">policies</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildAllCommand.html#type">type</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildAllCommand.html#name">name</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildAllCommand.html#description">description</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildAllCommand.html#options">options</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildAllCommand.html#stringHelper">stringHelper</a></li></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.console.commands.build.BuildAllCommand.html#handle">handle</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildAllCommand.html#build">build</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildAllCommand.html#getBuildTypes">getBuildTypes</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildAllCommand.html#getBundles">getBundles</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildAllCommand.html#getBuildArguments">getBuildArguments</a></li></ul></li><li><a href="nwayo.core.console.commands.build.BuildAssetsCommand.html">BuildAssetsCommand</a><ul class='members'><li data-type='member'><a href="nwayo.core.console.commands.build.BuildAssetsCommand.html#policies">policies</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildAssetsCommand.html#type">type</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildAssetsCommand.html#name">name</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildAssetsCommand.html#description">description</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildAssetsCommand.html#options">options</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildAssetsCommand.html#stringHelper">stringHelper</a></li></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.console.commands.build.BuildAssetsCommand.html#handle">handle</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildAssetsCommand.html#build">build</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildAssetsCommand.html#getBuildTypes">getBuildTypes</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildAssetsCommand.html#getBundles">getBundles</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildAssetsCommand.html#getBuildArguments">getBuildArguments</a></li></ul></li><li><a href="nwayo.core.console.commands.build.BuildScriptsCommand.html">BuildScriptsCommand</a><ul class='members'><li data-type='member'><a href="nwayo.core.console.commands.build.BuildScriptsCommand.html#policies">policies</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildScriptsCommand.html#type">type</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildScriptsCommand.html#name">name</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildScriptsCommand.html#description">description</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildScriptsCommand.html#options">options</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildScriptsCommand.html#stringHelper">stringHelper</a></li></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.console.commands.build.BuildScriptsCommand.html#handle">handle</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildScriptsCommand.html#build">build</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildScriptsCommand.html#getBuildTypes">getBuildTypes</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildScriptsCommand.html#getBundles">getBundles</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildScriptsCommand.html#getBuildArguments">getBuildArguments</a></li></ul></li><li><a href="nwayo.core.console.commands.build.BuildStylesCommand.html">BuildStylesCommand</a><ul class='members'><li data-type='member'><a href="nwayo.core.console.commands.build.BuildStylesCommand.html#policies">policies</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildStylesCommand.html#type">type</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildStylesCommand.html#name">name</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildStylesCommand.html#description">description</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildStylesCommand.html#options">options</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildStylesCommand.html#stringHelper">stringHelper</a></li></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.console.commands.build.BuildStylesCommand.html#handle">handle</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildStylesCommand.html#build">build</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildStylesCommand.html#getBuildTypes">getBuildTypes</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildStylesCommand.html#getBundles">getBundles</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildStylesCommand.html#getBuildArguments">getBuildArguments</a></li></ul></li><li><a href="nwayo.core.console.commands.build.BuildWatchCommand.html">BuildWatchCommand</a><ul class='members'><li data-type='member'><a href="nwayo.core.console.commands.build.BuildWatchCommand.html#policies">policies</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildWatchCommand.html#type">type</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildWatchCommand.html#name">name</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildWatchCommand.html#description">description</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildWatchCommand.html#options">options</a></li><li data-type='member'><a href="nwayo.core.console.commands.build.BuildWatchCommand.html#stringHelper">stringHelper</a></li></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.console.commands.build.BuildWatchCommand.html#getBuildTypes">getBuildTypes</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildWatchCommand.html#getBuildArguments">getBuildArguments</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildWatchCommand.html#handle">handle</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildWatchCommand.html#build">build</a></li><li data-type='method'><a href="nwayo.core.console.commands.build.BuildWatchCommand.html#getBundles">getBundles</a></li></ul></li><li><a href="nwayo.core.console.commands.install.InstallComponentsCommand.html">InstallComponentsCommand</a><ul class='members'><li data-type='member'><a href="nwayo.core.console.commands.install.InstallComponentsCommand.html#.dependencies">dependencies</a></li><li data-type='member'><a href="nwayo.core.console.commands.install.InstallComponentsCommand.html#name">name</a></li><li data-type='member'><a href="nwayo.core.console.commands.install.InstallComponentsCommand.html#description">description</a></li></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.console.commands.install.InstallComponentsCommand.html#handle">handle</a></li><li data-type='method'><a href="nwayo.core.console.commands.install.InstallComponentsCommand.html#installComponents">installComponents</a></li><li data-type='method'><a href="nwayo.core.console.commands.install.InstallComponentsCommand.html#t">t</a></li></ul></li><li><a href="nwayo.core.handlers.Handler.html">Handler</a><ul class='members'><li data-type='member'><a href="nwayo.core.handlers.Handler.html#.dependencies">dependencies</a></li><li data-type='member'><a href="nwayo.core.handlers.Handler.html#types">types</a></li><li data-type='member'><a href="nwayo.core.handlers.Handler.html#type">type</a></li></ul></li><li><a href="nwayo.core.policies.NwayoBuildPolicy.html">NwayoBuildPolicy</a><ul class='members'><li data-type='member'><a href="nwayo.core.policies.NwayoBuildPolicy.html#.dependencies">dependencies</a></li><li data-type='member'><a href="nwayo.core.policies.NwayoBuildPolicy.html#name">name</a></li></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.policies.NwayoBuildPolicy.html#passes">passes</a></li></ul></li><li><a href="nwayo.core.repositories.BuildTypeRepository.html">BuildTypeRepository</a><ul class='members'><li data-type='member'><a href="nwayo.core.repositories.BuildTypeRepository.html#.dependencies">dependencies</a></li><li data-type='member'><a href="nwayo.core.repositories.BuildTypeRepository.html#ALL">ALL</a></li><li data-type='member'><a href="nwayo.core.repositories.BuildTypeRepository.html#WATCH">WATCH</a></li><li data-type='member'><a href="nwayo.core.repositories.BuildTypeRepository.html#stringHelper">stringHelper</a></li></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.repositories.BuildTypeRepository.html#add">add</a></li><li data-type='method'><a href="nwayo.core.repositories.BuildTypeRepository.html#all">all</a></li><li data-type='method'><a href="nwayo.core.repositories.BuildTypeRepository.html#get">get</a></li><li data-type='method'><a href="nwayo.core.repositories.BuildTypeRepository.html#has">has</a></li><li data-type='method'><a href="nwayo.core.repositories.BuildTypeRepository.html#getIdByLabel">getIdByLabel</a></li></ul></li><li><a href="nwayo.core.repositories.BuildTypeRepositoryProxy.html">BuildTypeRepositoryProxy</a><ul class='members'></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.repositories.BuildTypeRepositoryProxy.html#get">get</a></li></ul></li><li><a href="nwayo.core.services.Builder.html">Builder</a><ul class='members'><li data-type='member'><a href="nwayo.core.services.Builder.html#.dependencies">dependencies</a></li></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.services.Builder.html#driver">driver</a></li><li data-type='method'><a href="nwayo.core.services.Builder.html#make">make</a></li><li data-type='method'><a href="nwayo.core.services.Builder.html#getForward">getForward</a></li></ul></li><li><a href="nwayo.core.services.BuilderProxy.html">BuilderProxy</a><ul class='members'></ul></li><li><a href="nwayo.core.services.Builder.drivers.AbstractWebpackDriver.html">AbstractWebpackDriver</a><ul class='members'><li data-type='member'><a href="nwayo.core.services.Builder.drivers.AbstractWebpackDriver.html#webpack">webpack</a></li></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.services.Builder.drivers.AbstractWebpackDriver.html#getBuilder">getBuilder</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.AbstractWebpackDriver.html#addEntry">addEntry</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.AbstractWebpackDriver.html#registerHandler">registerHandler</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.AbstractWebpackDriver.html#hasHandler">hasHandler</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.AbstractWebpackDriver.html#callHandler">callHandler</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.AbstractWebpackDriver.html#afterBuild">afterBuild</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.AbstractWebpackDriver.html#getAfterBuild">getAfterBuild</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.AbstractWebpackDriver.html#buildConfig">buildConfig</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.AbstractWebpackDriver.html#run">run</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.AbstractWebpackDriver.html#watch">watch</a></li></ul></li><li><a href="nwayo.core.services.Builder.drivers.Driver.html">Driver</a><ul class='members'></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.services.Builder.drivers.Driver.html#addEntry">addEntry</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.Driver.html#registerHandler">registerHandler</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.Driver.html#hasHandler">hasHandler</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.Driver.html#callHandler">callHandler</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.Driver.html#afterBuild">afterBuild</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.Driver.html#getAfterBuild">getAfterBuild</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.Driver.html#buildConfig">buildConfig</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.Driver.html#run">run</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.Driver.html#watch">watch</a></li></ul></li><li><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html">LaravelMixDriver</a><ul class='members'><li data-type='member'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#.dependencies">dependencies</a></li><li data-type='member'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#laravelMix">laravelMix</a></li><li data-type='member'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#WebpackConfig">WebpackConfig</a></li><li data-type='member'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#ComponentFactory">ComponentFactory</a></li><li data-type='member'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#Manifest">Manifest</a></li><li data-type='member'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#webpack">webpack</a></li></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#javascript">javascript</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#typescript">typescript</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#scss">scss</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#copy">copy</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#getLaravelMix">getLaravelMix</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#run">run</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#watch">watch</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#getBuilder">getBuilder</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#addEntry">addEntry</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#registerHandler">registerHandler</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#hasHandler">hasHandler</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#callHandler">callHandler</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#afterBuild">afterBuild</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#getAfterBuild">getAfterBuild</a></li><li data-type='method'><a href="nwayo.core.services.Builder.drivers.LaravelMixDriver.html#buildConfig">buildConfig</a></li></ul></li><li><a href="nwayo.core.services.Nwayo.html">Nwayo</a><ul class='members'><li data-type='member'><a href="nwayo.core.services.Nwayo.html#.dependencies">dependencies</a></li><li data-type='member'><a href="nwayo.core.services.Nwayo.html#phases">phases</a></li></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.services.Nwayo.html#on">on</a></li><li data-type='method'><a href="nwayo.core.services.Nwayo.html#before">before</a></li><li data-type='method'><a href="nwayo.core.services.Nwayo.html#after">after</a></li><li data-type='method'><a href="nwayo.core.services.Nwayo.html#registerHook">registerHook</a></li><li data-type='method'><a href="nwayo.core.services.Nwayo.html#register">register</a></li><li data-type='method'><a href="nwayo.core.services.Nwayo.html#build">build</a></li><li data-type='method'><a href="nwayo.core.services.Nwayo.html#preprocess">preprocess</a></li><li data-type='method'><a href="nwayo.core.services.Nwayo.html#process">process</a></li><li data-type='method'><a href="nwayo.core.services.Nwayo.html#postprocess">postprocess</a></li><li data-type='method'><a href="nwayo.core.services.Nwayo.html#runHooks">runHooks</a></li><li data-type='method'><a href="nwayo.core.services.Nwayo.html#runHooksForBundles">runHooksForBundles</a></li><li data-type='method'><a href="nwayo.core.services.Nwayo.html#getHooks">getHooks</a></li><li data-type='method'><a href="nwayo.core.services.Nwayo.html#hasHook">hasHook</a></li><li data-type='method'><a href="nwayo.core.services.Nwayo.html#prepareHooks">prepareHooks</a></li><li data-type='method'><a href="nwayo.core.services.Nwayo.html#getRegisteredTypes">getRegisteredTypes</a></li><li data-type='method'><a href="nwayo.core.services.Nwayo.html#resolveTypes">resolveTypes</a></li><li data-type='method'><a href="nwayo.core.services.Nwayo.html#useState">useState</a></li></ul></li><li><a href="nwayo.core.services.ProjectService.html">ProjectService</a><ul class='members'><li data-type='member'><a href="nwayo.core.services.ProjectService.html#.dependencies">dependencies</a></li><li data-type='member'><a href="nwayo.core.services.ProjectService.html#pathHelper">pathHelper</a></li></ul><ul class='methods'><li data-type='method'><a href="nwayo.core.services.ProjectService.html#addComponentNamespace">addComponentNamespace</a></li><li data-type='method'><a href="nwayo.core.services.ProjectService.html#getRootPath">getRootPath</a></li><li data-type='method'><a href="nwayo.core.services.ProjectService.html#getSourcePath">getSourcePath</a></li><li data-type='method'><a href="nwayo.core.services.ProjectService.html#getComponentsPath">getComponentsPath</a></li><li data-type='method'><a href="nwayo.core.services.ProjectService.html#getComponentPath">getComponentPath</a></li><li data-type='method'><a href="nwayo.core.services.ProjectService.html#getBundlesPath">getBundlesPath</a></li><li data-type='method'><a href="nwayo.core.services.ProjectService.html#getBundlePath">getBundlePath</a></li><li data-type='method'><a href="nwayo.core.services.ProjectService.html#getBundles">getBundles</a></li><li data-type='method'><a href="nwayo.core.services.ProjectService.html#loadBundleData">loadBundleData</a></li></ul></li></ul>
		</div></nav>

		<div id="main">
		
			<h1 class="page-title">services/Nwayo.js</h1>
		

			



    
    <section>
        <article>
            <pre id="line" class="line-numbers"><code class="language-js">//--------------------------------------------------------
//-- Nwayo Core - Services - Nwayo
//--------------------------------------------------------

import __ from '@absolunet/private-registry';


/**
 * Nwayo main service.
 *
 * @memberof nwayo.core.services
 * @hideconstructor
 */
class Nwayo {

	/**
	 * Class dependencies: &lt;code>['app', 'nwayo.build.type', 'nwayo.builder', 'nwayo.project']&lt;/code>.
	 *
	 * @type {Array&lt;string>}
	 */
	static get dependencies() {
		return ['app', 'nwayo.build.type', 'nwayo.builder', 'nwayo.project'];
	}

	/**
	 * @inheritdoc
	 * @private
	 */
	init() {
		__(this).set('hooks', {});
		__(this).set('calls', new Map());
	}

	/**
	 * Register an action on build process.
	 *
	 * @param {string} type - The build type name.
	 * @param {Function} action - The action to take during build process. Can be async.
	 * @param {number} [weight] - The weight of the registered action, the higher the latest.
	 * @returns {nwayo.core.services.Nwayo} The current Nwayo instance.
	 */
	on(type, action, weight) {
		return this.registerHook(type, this.phases.process, action, weight);
	}

	/**
	 * Register an action before build process.
	 *
	 * @param {string} type - The build type name.
	 * @param {Function} action - The action to take before build process. Can be async.
	 * @param {number} [weight] - The weight of the registered action, the higher the latest.
	 * @returns {nwayo.core.services.Nwayo} The current Nwayo instance.
	 */
	before(type, action, weight) {
		return this.registerHook(type, this.phases.preprocess, action, weight);
	}

	/**
	 * Register an action after build process.
	 *
	 * @param {string} type - The build type name.
	 * @param {Function} action - The action to take after build process. Can be async.
	 * @param {number} [weight] - The weight of the registered action, the higher the latest.
	 * @returns {nwayo.core.services.Nwayo} The current Nwayo instance.
	 */
	after(type, action, weight) {
		return this.registerHook(type, this.phases.postprocess, action, weight);
	}

	/**
	 * Register an action for a given build type, during a specific phase.
	 *
	 * @param {string} type - The build type name.
	 * @param {string} phase - The action phase, normally "preprocess", "process" or "postprocess".
	 * @param {Function} action - The action to take during the given phase. Can be async.
	 * @param {number} [weight=0] - The weight of the registered action, the higher the latest.
	 * @returns {nwayo.core.services.Nwayo} The current Nwayo instance.
	 */
	registerHook(type, phase, action, weight = 0) {
		const hooks = __(this).get('hooks');
		hooks[type] = hooks[type] || {};
		hooks[type][phase] = hooks[type][phase] || [];
		hooks[type][phase].push({ action, weight });

		return this;
	}

	/**
	 * Register a class or object to handle hook phases for specified types.
	 *
	 * @param {object|Function|string} registrableHandler - Makeable handler that specifies types and phase hook(s).
	 * @returns {nwayo.core.services.Nwayo} The current Nwayo instance.
	 */
	register(registrableHandler) {
		const handler         = this.app.make(registrableHandler);
		const { weight = {} } = handler;

		Object.values(this.phases).forEach((phase) => {
			if (handler[phase]) {
				const action = handler[phase].bind(handler);
				handler.types.forEach((type) => {
					const phaseWeight = weight[phase] || (typeof weight === 'number' ? weight : undefined);
					this.registerHook(type, phase, action, phaseWeight);
				});
			}
		});

		return this;
	}

	/**
	 * Start a build job.
	 *
	 * @param {string|Array&lt;string>} [type] - The build type to run. If nothing is specified, all the types will run.
	 * @param {string|Array&lt;string>} [bundle] - The bundle names to run build on. If nothing is specified, all the bundles will be used.
	 * @param {object} [options] - Build options.
	 * @returns {Promise} The async process promise.
	 */
	async build(type, bundle, options) {
		const types   = this.resolveTypes(type);
		const bundles = bundle ? Array.isArray(bundle) ? bundle : [bundle] : this.nwayoProject.getBundles();

		const bundlesData = await Promise.all(bundles.map(async (name) => {
			const bundleData = this.nwayoProject.loadBundleData(name);

			await this.runHooks(types, this.phases.bundleLoaded, async (action, stack) => {
				await action(bundleData, stack);
			});

			return bundleData;
		}));

		await this.runHooks(types, this.phases.bundlesLoaded, async (action, stack) => {
			await action(bundlesData, stack);
		});

		await this.preprocess(bundlesData, types, options);
		await this.process(bundlesData, types, options);
		await this.postprocess(bundlesData, types, options);
	}

	/**
	 * Run build preprocess phase.
	 * This phase should be run before using the builder.
	 *
	 * @param {Array&lt;nwayo.core.services.BundleModel>} bundles - The bundles to run preprocess phase on.
	 * @param {Array&lt;string>} types - The build types to preprocess.
	 * @param {object} options - The build options.
	 * @returns {Promise} - The async process promise.
	 */
	async preprocess(bundles, types, options) {
		await this.runHooksForBundles(bundles, types, this.phases.preprocess, async (action, bundle, stack) => {
			await action(bundle, options, stack);
		});
	}

	/**
	 * Run build process phase.
	 * This phase should be used to add entries in the builder.
	 *
	 * @param {Array&lt;nwayo.core.services.BundleModel>} bundles - The bundles to run preprocess phase on.
	 * @param {Array&lt;string>} types - The build types to preprocess.
	 * @param {boolean|object&lt;string, *>} options - The build options. If true, considered to be the watch flag.
	 * @returns {Promise} - The async process promise.
	 */
	async process(bundles, types, options) {
		/* eslint-disable no-await-in-loop */
		const config   = [];

		// Since each builder driver can be limited in concurrency while generating configuration,
		// each bundle's builder configuration is generated separately, in series.
		for (const index in bundles) {
			if (Object.prototype.hasOwnProperty.call(bundles, index)) {
				const bundle  = bundles[index];
				const builder = this.nwayoBuilder.make({ bundle });

				await this.runHooks(types, this.phases.builderCreated, async (action, stack) => {
					await action(builder, bundle, stack);
				});

				await this.runHooks(types, this.phases.process, async (action, stack) => {
					await action(builder, bundle, options, stack);
				});

				const singleConfig = builder.buildConfig();

				await this.runHooks(types, this.phases.configGenerated, async (action, stack) => {
					await action(singleConfig, bundle, options, stack);
				});

				config[index] = singleConfig;
			}
		}

		await this.runHooks(types, this.phases.beforeBuild, async (action, stack) => {
			await action(config, bundles, options, stack);
		});

		await this.runHooks(types, this.phases.afterBuild, (action, stack) => {
			this.nwayoBuilder.afterBuild((...parameters) => {
				action(...parameters, stack);
			});
		});

		if (options &amp;&amp; (options === true || options.watch)) {
			await this.nwayoBuilder.watch(config, (options.watch || options) === true ? undefined : options.watch);
		} else {
			await this.nwayoBuilder.run(config);
		}
		/* eslint-enable no-await-in-loop */
	}

	/**
	 * Run build postprocess phase.
	 * This phase should be run after the builder has done the build job.
	 *
	 * @param {Array&lt;nwayo.core.services.BundleModel>} bundles - The bundles to run preprocess phase on.
	 * @param {Array&lt;string>} types - The build types to preprocess.
	 * @param {object} options - The build options.
	 * @returns {Promise} - The async process promise.
	 */
	async postprocess(bundles, types, options) {
		await this.runHooksForBundles(bundles, types, this.phases.postprocess, async (action, bundle, stack) => {
			await action(bundle, options, stack);
		});
	}

	/**
	 * Handle all registered hooks for given types and phase through a handler.
	 *
	 * @param {Array&lt;string>} types - The build types.
	 * @param {string} phase - The phase to run.
	 * @param {Function} handler - The handler to manually run all actions.
	 * @returns {Promise} The async process promise.
	 */
	async runHooks(types, phase, handler) {
		await Promise.all(types.map(async (type) => {
			await Promise.all(this.getHooks(type, phase).map(async (action) => {
				const stack = this.useState(action, type, phase);
				await handler(action, stack);
			}));
		}));
	}

	/**
	 * Run a specific build phase.
	 *
	 * @param {Array&lt;nwayo.core.services.BundleModel>} bundles - The bundles to run build phase on.
	 * @param {Array&lt;string>} types - The build types to run.
	 * @param {string} phase - The phase to run.
	 * @param {Function} handler - Callback to be run on each bundle, for each type.
	 * @returns {Promise} The async process promise.
	 */
	async runHooksForBundles(bundles, types, phase, handler) {
		await Promise.all(bundles.map(async (bundle) => {
			await this.runHooks(types, phase, async (action, stack) => {
				await handler(action, bundle, stack);
			});
		}));
	}

	/**
	 * Get all hooks for a given type and phase.
	 *
	 * @param {string} type - The build type.
	 * @param {string} [phase] - The build phase.
	 * @returns {Array&lt;Function>|object&lt;string, Array&lt;Function>>} The retrieved actions, ordered by weight.
	 */
	getHooks(type, phase) {
		this.prepareHooks();

		if (!this.hasHook(type, phase)) {
			return [];
		}

		const hooks = __(this).get('hooks')[type];

		if (!phase) {
			return Object.fromEntries(Object.entries(hooks).map(([key, typeHooks]) => {
				return [key, typeHooks.map(({ action }) => {
					return action;
				})];
			}));
		}

		return hooks[phase].map(({ action }) => {
			return action;
		});
	}

	/**
	 * Check if a hook exists for given phase and type.
	 *
	 * @param {string} type - The build type.
	 * @param {string} [phase] - The build phase.
	 * @returns {boolean} Indicates that a hook was registered for the given build phase and build type.
	 */
	hasHook(type, phase) {
		const hooks = __(this).get('hooks');

		const typeHasHooks = Object.prototype.hasOwnProperty.call(hooks, type);

		if (!phase) {
			return typeHasHooks;
		}

		return typeHasHooks &amp;&amp; Object.prototype.hasOwnProperty.call(hooks[type], phase);
	}

	/**
	 * Prepare hooks for immediate usage.
	 *
	 * @returns {nwayo.core.services.Nwayo} The current Nwayo instance.
	 */
	prepareHooks() {
		Object.values(__(this).get('hooks')).forEach((hooks) => {
			Object.values(hooks).forEach((phaseHooks) => {
				phaseHooks.sort(({ weight: a }, { weight: b }) => {
					return a - b;
				});
			});
		});

		return this;
	}

	/**
	 * Get all registered types.
	 *
	 * @returns {Array&lt;string>} The registered types.
	 */
	getRegisteredTypes() {
		return Object.values(this.nwayoBuildType.all());
	}

	/**
	 * Resolve types from either single type or a list of types.
	 *
	 * @param {string|Array&lt;string>} type - The build type name(s).
	 * @returns {Array&lt;string>} The resolved build types name.
	 */
	resolveTypes(type) {
		const types = (Array.isArray(type) ? type : [type]).filter(Boolean);

		if (types.length === 0 || types.includes(this.nwayoBuildType.ALL)) {
			return this.getRegisteredTypes();
		}

		return types;
	}

	/**
	 * Use call stack meta data for a call.
	 * It returns a &lt;code>done&lt;/code> callback that increments the stack once the call has been made.
	 *
	 * @param {Function} action - The action to get stack from.
	 * @param {string} type - The build type name.
	 * @param {string} phase - The current hook phase name.
	 * @returns {object&lt;string, number>} The current call stack.
	 */
	useState(action, type, phase) {
		const callsMap   = __(this).get('calls');
		const phaseCalls = callsMap.get(action) || {};
		const calls      = { ...phaseCalls[phase] || {} };
		const state      = { type, calls, phase };

		callsMap.set(action, {
			...phaseCalls,
			[phase]: {
				...calls,
				[type]: (calls[type] || 0) + 1
			}
		});

		return state;
	}

	/**
	 * Available phases.
	 *
	 * @type {object&lt;string, string>}
	 */
	get phases() {
		return {
			bundleLoaded: 'bundleLoaded',
			bundlesLoaded: 'bundlesLoaded',
			preprocess: 'preprocess',
			builderCreated: 'builderCreated',
			process: 'process',
			configGenerated: 'configGenerated',
			beforeBuild: 'beforeBuild',
			afterBuild: 'afterBuild',
			postprocess: 'postprocess'
		};
	}

}


export default Nwayo;
</code></pre>
        </article>
    </section>




		</div>
	</div>

	<footer>
		MIT © 2011-2020 <span class="made">Made with <span class="adjective" data-component="adjective">&#x2764;</span> by <a href="https://absolunet.com" data-external="external">Absolunet</a></span>
	</footer>

	<script src="../assets__/main.js"></script>

</body>
</html>
