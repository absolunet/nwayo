/*!
 * @preserve Generated by nwayo 3.7.0 for PROJECT_NAME:site
 */

 (function(global, undefined) { 
	//-------------------------------------
	//-- Collection starter kit
	//-------------------------------------
	//-------------------------------------
	//-- Exclusion starter kit
	//-------------------------------------
	
	/* eslint-disable no-unused-vars */
	var define = undefined;
	var require = undefined;
	
	
	/* eslint-disable strict, no-unused-vars, no-redeclare, prefer-destructuring */
	var PROJECT = global.nwayo.project;
	var app = global[PROJECT];
	var konstan = app.konstan;
	
	var DOM_PARSED = global.nwayo.vows.DOMParsed;
	var DOCUMENT_LOADED = global.nwayo.vows.documentLoaded;
	var GLOBAL_JQUERY_LOADED = global.nwayo.vows.globaljqueryLoaded;
	
	var __ = global.nwayo.shortcuts;
	var toolbox = global.nwayo.helpers;
	
	var jQuery = global.nwayo.vendor.jQuery;
	var $ = global.nwayo.vendor.jQuery;
	var _ = global.nwayo.vendor.lodash;
	var Modernizr = global.nwayo.vendor.Modernizr;
	var pinki = global.nwayo.vendor.pinki;

//-------------------------------------
//-- Common
//-------------------------------------
function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}} //-------------------------------------
//-- Common - Util
//-------------------------------------

(function () {
  'use strict';

  //-- Public class
  var Util = function Util() {_classCallCheck(this, Util);};










































































  app.util = new Util();

})();

//-------------------------------------
//-- Common - Base
//-------------------------------------

//= **require vendor/node_modules/@absolunet/kafe/dist/kafe
//= **require vendor/node_modules/@absolunet/nwayo-toolbox/scripts/wrapper/jsrender
//= **require vendor/node_modules/@absolunet/nwayo-toolbox/scripts/helpers/lazyload

(function () {
  'use strict';

  var local = {};


  //-- Cache data instantly
  local.cache = function () {

    /**
                             // JSRender
                             $.views.helpers({
                             	konstan:   (key) => { return _.get(konstan, key); },
                             	translate: (key) => { return app.translation[key]; }
                             });
                             /**/

    /**
                                  // Lazyload
                                  toolbox.lazyload.register({
                                  	'image': {
                                  		firstPass: ($this, options) => {
                                  			$this.attr('src', options.url);
                                  		}
                                  	},
                                  		'bg-image': {
                                  		firstPass: ($this, options) => {
                                  			$this.css('background-image', `url('${options.url}')`);
                                  		}
                                  	},
                                  		'sample': {
                                  		preprocess: ($this) => {
                                  			setTimeout(() => { $this.addClass('placeholder'); }, 1000);
                                  		},
                                  		firstPass: ($this, options) => {
                                  			if (options.url) {
                                  				$this.find(`${__.component('main-image')} > img`).attr('src', options.url);
                                  			}
                                  		},
                                  		secondPass: ($this, options) => {
                                  			if (options.hoverUrl && whatInput.ask('intent') === 'mouse') {
                                  				const $hover = $this.find(__.component('main-image'));
                                  				$hover.css('background-image', `url('${options.hoverUrl}')`);
                                  					$hover.imagesLoaded({ background: true })
                                  					.then(() => {
                                  						$hover.addClass('hover');
                                  					})
                                  				;
                                  			}
                                  		}
                                  	}
                                  });
                                  /**/





    // Optional scroll
    app.scrollTransition = whatInput.ask('intent') === 'touch' ? 0 : konstan.transition.animation;

  };


  //-- Cache data once DOM is loaded
  local.cacheDOM = function () {

    /**
                                // Translation
                                app.translation = {};
                                $('[data-translation]').each(function() {
                                	$.extend(app.translation, $(this).data('translation'));
                                });
                                /**/


    /**
                                     // tmpl
                                     $('script[type="text/x-jsrender"][id^="jshtml-"]').each(function() {
                                     	const id = $(this).attr('id');
                                     	app.tmpl[`html${_.upperFirst(_.camelCase(id.substring(7)))}`] = $.templates(`#${id}`);
                                     });
                                     /**/

  };


  //-- Bind events once DOM is loaded
  local.bind = function () {

    __.$body

    // External links
    .on('click', 'a[data-external]', function () {
      $(this).attr('target', '_blank');
    })


    /**
       // Open links in top window
       .on('click', __.action('open-top'), function() {
       	$(this).attr('target', '_top');
       })
       /**/


    /**
            // Anchors
            .on('click', 'a[data-anchor="true"]', function(event) {
            	event.preventDefault();
            	$.scrollTo($(this).attr('href'), app.scrollTransition, { offset: { top: -15 } });
            })
            /**/


    /**
                 // Simple toggler
                 .on('click', `${__.component('toggle-wrapper')} ${__.action('toggle-content')}`, function() {
                 	$(this).closest(__.component('toggle-wrapper')).toggleClass('opened');
                 })
                 /**/;


  };


  //-- Subscribe to topics
  local.subscribe = function () {

    // pinki.message.subscribe('foo.bar', () => {});

  };


  //-- Execute once DOM is loaded
  local.start = function () {

    __.$document.foundation();

    /**
                               // When global jQuery is ready
                               pinki.vow.when(GLOBAL_JQUERY_LOADED).then(($Global) => {
                               	$Global().on('click');
                               });
                               /**/

    /**
                                    // Webfont loader
                                    WebFont.load({
                                    	custom:       { families: ['FontName1', 'FontName2', 'FontName3'] },
                                    	loading:      () => { __.$body.trigger('WebFont:loading'); },
                                    	active:       () => { __.$body.trigger('WebFont:active'); },
                                    	inactive:     () => { __.$body.trigger('WebFont:inactive'); },
                                    	fontloading:  (familyName, fvd) => { __.$body.trigger('WebFont:loading_font'); },
                                    	fontactive:   (familyName, fvd) => { __.$body.trigger('WebFont:active_font'); },
                                    	fontinactive: (familyName, fvd) => { __.$body.trigger('WebFont:inactive_font'); }
                                    });
                                    		// Fonts loaded
                                    __.$body.on('WebFont:active', () => {
                                    	});
                                    /**/





  };


  //-- Execute once page is loaded
  local.delayedStart = function () {

    __.$body.addClass('document-loaded');

  };






  // Outline
  local.cache();
  local.subscribe();

  // DOM Ready
  pinki.vow.when(DOM_PARSED).then(function () {
    local.cacheDOM();
    local.bind();
    local.start();
  });

  // Document loaded
  pinki.vow.when(DOCUMENT_LOADED).then(function () {
    local.delayedStart();
  });

})();


//-------------------------------------
//-- Form
//-------------------------------------
//-------------------------------------
//-- Form - Base
//-------------------------------------

//= **require vendor/node_modules/inputmask/dist/inputmask/inputmask
//= **require vendor/node_modules/inputmask/dist/inputmask/inputmask.extensions
//= **require vendor/node_modules/inputmask/dist/inputmask/inputmask.date.extensions
//= **require vendor/node_modules/inputmask/dist/inputmask/inputmask.numeric.extensions
//= **require vendor/node_modules/inputmask.phone/dist/inputmask.phone/inputmask.phone.extensions
//= **require vendor/node_modules/inputmask/dist/inputmask/jquery.inputmask

(function () {
  'use strict';

  var local = {};

  //-- Input mask
  var bindInputMask = function bindInputMask() /* $context = __.$body */{

    /**
                                                                         // Numeric
                                                                         $context.find('input[data-mask="numeric-integer"]').inputmask('integer', {
                                                                         	allowPlus:     false,
                                                                         	allowMinus:    false,
                                                                         	min:           1,
                                                                         	integerDigits: 3
                                                                         });
                                                                         	$context.find('input[data-mask="numeric-integer-nomin"]').inputmask('integer', {
                                                                         	allowPlus:     false,
                                                                         	allowMinus:    false,
                                                                         	integerDigits: 3
                                                                         });
                                                                         	$context.find('input[data-mask="numeric-decimal"]').inputmask('decimal', {
                                                                         	allowPlus:     false,
                                                                         	allowMinus:    false,
                                                                         	min:           1,
                                                                         	integerDigits: 5,
                                                                         	digits:        2
                                                                         });
                                                                         	// Phone
                                                                         $context.find('input[type="tel"]').inputmask('(999) 999-9999');
                                                                         $context.find('input[type="tel"][data-mask="ext"]').inputmask('(999) 999-9999 [ext: 99999]');
                                                                         	// Postal code
                                                                         $context.find('input[data-mask="postalcode"]').inputmask('A9A 9A9');
                                                                         	// Date
                                                                         if (!Modernizr.inputtypes.date) {
                                                                         	$context.find('input[type="date"]').inputmask('yyyy-mm-dd', { placeholder: app.env.lang === 'fr' ? 'aaaa-mm-jj' : 'yyyy-mm-dd' });
                                                                         }
                                                                         	// Time
                                                                         $('input[data-mask="time"]').inputmask('hh:mm:ss');
                                                                         	// Credit card
                                                                         $('input[data-mask="credit-card"]').inputmask('9{10}');
                                                                         $('input[data-mask="credit-card-cvv"]').inputmask('9{4}');
                                                                         	/**/








  };


  //-- Numeric keyboard
  var bindNumericKeyboard = function bindNumericKeyboard() /* $context = __.$body */{

    /**
                                                                                     $context.find(`
                                                                                     	input[data-mask="numeric-integer"],
                                                                                     	input[data-mask="numeric-integer-nomin"],
                                                                                     	input[data-mask="credit-card"],
                                                                                     	input[data-mask="credit-card-cvv"]
                                                                                     `)
                                                                                     	.attr('pattern', '\\d*')
                                                                                     ;
                                                                                     /**/
  };


  //-- Form events
  var rebindFormEvent = function rebindFormEvent($context) {
    bindInputMask($context);
    bindNumericKeyboard($context);

    pinki.message.publish("".concat(PROJECT, ".form.rebindFormEvent"));
  };




  //-- Cache data instantly
  local.cache = function () {

    //

  };


  //-- Cache data once DOM is loaded
  local.cacheDOM = function () {

    //

  };


  //-- Bind events once DOM is loaded
  local.bind = function () {

    rebindFormEvent();

    /**
                       // Bind on text field change
                       $('input:text').on('input paste cut keyup', () => {});
                       /**/

  };


  //-- Subscribe to topics
  local.subscribe = function () {

    /**
                                 pinki.message.subscribe('sample', (message, data) => {
                                 	rebindFormEvent(data.$context);
                                 });
                                 /**/

  };


  //-- Execute once DOM is loaded
  local.start = function () {

    //

  };


  //-- Execute once page is loaded
  local.delayedStart = function () {

    //

  };






  // Outline
  local.cache();
  local.subscribe();

  // DOM Ready
  pinki.vow.when(DOM_PARSED).then(function () {
    local.cacheDOM();
    local.bind();
    local.start();
  });

  // Document loaded
  pinki.vow.when(DOCUMENT_LOADED).then(function () {
    local.delayedStart();
  });

})();


//-------------------------------------
//-- Site
//-------------------------------------
//-------------------------------------
//-- Site - Base
//-------------------------------------

(function () {
  'use strict';

  var local = {};


  //-- Cache data instantly
  local.cache = function () {

    // Env
    // app.env.isUniquePage = app.env.pageId === 'UID';
    // app.env.isTypePage   = _.includes(app.env.pageTags, 'TYPE-ID');
    // app.env.isOneOfThese = Boolean(_.intersection(app.env.pageTags, ['ID1', 'ID2']).length);

  };


  //-- Cache data once DOM is loaded
  local.cacheDOM = function () {

    //

  };


  //-- Bind events once DOM is loaded
  local.bind = function () {

    //

  };


  //-- Subscribe to topics
  local.subscribe = function () {

    // pinki.message.subscribe('foo.bar',  () => {});

  };


  //-- Execute once DOM is loaded
  local.start = function () {

    //

  };


  //-- Execute once page is loaded
  local.delayedStart = function () {

    //

  };






  // Outline
  local.cache();
  local.subscribe();

  // DOM Ready
  pinki.vow.when(DOM_PARSED).then(function () {
    local.cacheDOM();
    local.bind();
    local.start();
  });

  // Document loaded
  pinki.vow.when(DOCUMENT_LOADED).then(function () {
    local.delayedStart();
  });

})();


 })(typeof window !== 'undefined' ? window : this);
