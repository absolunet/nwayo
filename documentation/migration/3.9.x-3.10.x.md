# 3.9.x â†’ 3.10.x
[View the source differences on GitHub](https://github.com/absolunet/nwayo/compare/3.9.0...3.10.0)

## Key changes
- Add bundled ESLint configuration
- Add option to use the workflow without the global CLI
- Add option to use global standalone Dart Sass compiler
- Remove some internal Sass functions



## What to do
- Update version `package.json` (duh...)



## Use bundled ESLint configuration

### Change your `.eslintrc.yaml`

From
```yaml
extends:
  - '@absolunet/nwayo'

# or
extends:
  - '@absolunet/nwayo'
  - './node_modules/@absolunet/nwayo-workflow/ressources/eslint-config-pre-prettier.cjs'
```

To:
```yaml
extends:
  - "./node_modules/@absolunet/nwayo-workflow/config/eslint.cjs"

# or
extends:
  - "./node_modules/@absolunet/nwayo-workflow/config/eslint.cjs"
  - "./node_modules/@absolunet/nwayo-workflow/config/eslint-no-prettier.cjs"
```


## Stop using global CLI (optional)

### Remove global CLI
```shell
npm uninstall --global @absolunet/nwayo-cli
```

### Use npm scripts to use included binary
Inside your `./package.json` add scripts to call nwayo commands

```json
{
  "scripts": {
    "build-<task>": "nwayo-cli run <task>",
    "rebuild": "nwayo-cli rebuild",
    "watch": "nwayo-cli watch"
  }
}
```

```shell
# Old CLI calls
nwayo run <task>
nwayo rebuild
nwayo watch

# New CLI calls
npm run build-<task>
npm run rebuild
npm run watch
```

A recommanded pattern is to create and document all your own custom commands
```json
{
  "scripts": {
    "lint": "nwayo-cli run scripts-lint && nwayo-cli run styles-lint",
    "code-xyz": "nwayo-cli run scripts xyz && nwayo-cli run styles xyz",
    "generate-all": "nwayo-cli rebuild && cd .. && grunt less"
  }
}
```

```shell
npm run lint
npm run code-xyz
npm run generate-all
```


## Use global standalone Dart Sass compiler (optional)

The standalone Dart Sass compiler is way faster than the pure JavaScript version embedded in nwayo. But it needs to be installed manually on the workstation. Here's what to do, if you want to use it.

### Install the Dart Sass standalone compiler

Follow the instructions on the installation page and make sure that the `sass` command works:
[https://sass-lang.com/install](https://sass-lang.com/install)


### Enable feature in the project configuration

Edit your `./nwayo.yaml` to add this configuration

```yaml
useGlobalDartSassCompiler: true
```



## Make sure these internal Sass functions are not in your code
Some internal Sass functions from the toolbox and the main compiler have been removed.
They should not have been used outside the toolbox, but if your project has been using them, you will have to replace them with one of the new PostCSS functions.

#### `nwayo-cacheinvalidator-querystring()`, `nwayodart-checksum()`
Added a checksum value at the end of an asset URL. Have been implemented in:
- `nwayopostcss-url-image()`
- `nwayopostcss-url-woff-woff2()`

#### `nwayo-color-replace()`, `nwayo-svg-data-uri()`
Replaced a hex color in a string, escaped a svg string to be used as a data URI. Have been implemented in:
- `nwayopostcss-svg-image()`

#### `nwayodart-inline-file()`
Converted an image to a Base64 data URI. Has been replaced by:
- `nwayopostcss-base64-image()`

#### `nwayodart-file-exists()`, `nwayodart-read-file()`
Utilities to read files on the disk. Have not been replaced.

**Reference**:
- PostCSS functions: [https://github.com/absolunet/nwayo/blob/3.10.0/packages/workflow/helpers/postcss-functions.js](https://github.com/absolunet/nwayo/blob/3.10.0/packages/workflow/helpers/postcss-functions.js)
- Examples of usage in the toolbox: [https://github.com/absolunet/nwayo/blob/3.10.0/packages/toolbox/styles/_mixins-core.scss](https://github.com/absolunet/nwayo/blob/3.10.0/packages/toolbox/styles/_mixins-core.scss)
